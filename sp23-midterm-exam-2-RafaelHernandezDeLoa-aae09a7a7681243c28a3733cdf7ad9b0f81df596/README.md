# Midterm Exam 2 Rafael Hernandez De Loa
sp23-midterm-exam-2-RafaelHernandezDeLoa created by GitHub Classroom

## Due: 4/10/2023

For this midterm, I had to create an average calculator that can calculate the average of four numbers written in a 4 by 6 register. I was given the code for a circuit that can be used to create an average calculator except for the code for the finite state machine which overlooks the entire operation of the circuit. I had to finish the code for this module in order to make this average calculator work. The file only provides me the necessary inputs and outputs needed for me to make this module work with the rest of the code given. I was given an input called calculate_average and three outputs called en, rst_n, ld. From what I understand about the description of the circuit provided, the input is used to initiate the calculation when we set this input to one. The output en is used used to enable the circuit to take in the provided numbers and add them up to get the total sum of the numbers. The ld output is used to initiate the final register in the circuit to divide the sum by four (the total number of numbers we are using to calculate the average). The rst_n output is used to clear the accumulator in the circuit which is used to add the current uncompleted sum provided at the moment with the current number we are adding to it. This output is responsible for clearing the current sum in order to be ready for the next average calculation we would possibly want to initiate. Below shows the state diagram I created for this finite state machine. I have a total of six states, s0, s1, s2, s3, s4 and s5. s0 is the state where we are waiting for the user to initiate an average calculation. s1 to s4 are the states where we initial parts of the cirucuit to calculate the total sum of the numbers one by one. s5 is used to load the total sum into the average register to divide the number by four. The calculate_average input determines whether the operation should begin and go throught to the other states. States s1 to s4 outputs en to assist with the addition operation. All the states except for s0 has the rst_n output to make sure that the accumulator doesn't reset midway throught the calculation. Finally, the state s5 has the ld output to enable the division to take place, finalizing the operation and letting the circuit obtain the result and display it to the user.

## Midterm 2 Testbench:
![Midterm 2 Testbench](https://github.com/Spring-2023-Classes/sp23-midterm-exam-2-RafaelHernandezDeLoa/blob/d6a1bda965ca9160037e0ec9e5dba3a5230bbf50/Midterm_2_Testbench.png)
Note: The average_reg results are in hexidecimal.

## Finite State Diagram:
![Finite State Diagram]([https://github.com/Spring-2023-Classes/sp23-midterm-exam-2-RafaelHernandezDeLoa/blob/d6a1bda965ca9160037e0ec9e5dba3a5230bbf50/Finite_State_Diagram.png](https://github.com/RafaelHernandezDeLoa/Dgtl-Circuit-Dsgn-Verilog-Labs/blob/main/sp23-midterm-exam-2-RafaelHernandezDeLoa-aae09a7a7681243c28a3733cdf7ad9b0f81df596/Finite%20State%20Diagram.png))
